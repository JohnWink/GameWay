<!DOCTYPE html>
<html lang="en">
<head>
        
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="index_style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <title>GameWay</title>
    
</head>
<body>
  <div class="background">
      <div class="fixedContainer">

        <div class="navbar"><!--Header-->
          <a href="../Mainpage/index.html">Home</a>
          <a href="../NewsPage/index.html">News</a>
          <div class="dropdown">
            <button class="dropbtn">Genres
            </button>
            <div class="dropdown-content">
                <a href="../ListPages/index_action.html">Action</a>
                <a href="../ListPages/index_strategy.html">Strategy</a>
                <a href="../ListPages/index_RPG.html">RPG</a>
                <a href="../ListPages/index_adventure.html">Adventure</a>
             </div>
          </div>
            <div class="shopcart">
                    <a href="../ShoppingCartPage/index.html">
                            <img src="../Pages_Materials/shopping-cart.png" alt="shopping cart page!" height="16px" width="16px" >
                            </a>
                  </div>                  
                </div>
               
              </div>
        </div>
      </div>
      
<div class="flexbox">
    <div class = "infoBox">
        <div class ="itemBox">
                <img class="itemIMG" src="https://blznav.akamaized.net/img/games/cards/card-overwatch-7eff92e1257149aa.jpg">
                <p>Overwatch features a wide array of unique heroes, ranging from a time-jumping adventurer, to an armored, rocket-hammer-wielding warrior, to a transcendent robot monk. Every hero plays differently, and mastering their abilities is the key to unlocking their potential.</p>
                
                <button onclick="addItemFunction(50, 'Overwatch')" class ="itemButton">buy</button> <!-- This button adds the price and the name of the Item bought onto the method that it's calling-->
        </div>
        <div class="itemBox">
                <img class="itemIMG" src="../DescriptionPages/Metro2033Page/Metro2033_Material/metro_2033.jpg">
                <p>Overwatch features a wide array of unique heroes, ranging from a time-jumping adventurer, to an armored, rocket-hammer-wielding warrior, to a transcendent robot monk. Every hero plays differently, and mastering their abilities is the key to unlocking their potential.</p>
                <button onclick="addItemFunction(20, 'Metro 2033')" class ="itemButton">buy</button> 
        </div>
        <div class ="itemBox">
                <img class="itemIMG" src="../DescriptionPages/Ride3Page/Ride3_Material/RIDE3.jpg">
                <p>Overwatch features a wide array of unique heroes, ranging from a time-jumping adventurer, to an armored, rocket-hammer-wielding warrior, to a transcendent robot monk. Every hero plays differently, and mastering their abilities is the key to unlocking their potential.</p>
                <button onclick="addItemFunction(60, 'RIDE3')" class ="itemButton">buy</button> 
        </div>
        <div class ="itemBox" >
                <img class="itemIMG" src="../DescriptionPages/BrokenRealityPage/BrokenReality_Material/brokenReality.png">
                <p>Overwatch features a wide array of unique heroes, ranging from a time-jumping adventurer, to an armored, rocket-hammer-wielding warrior, to a transcendent robot monk. Every hero plays differently, and mastering their abilities is the key to unlocking their potential.</p>
                <button onclick="addItemFunction(30, 'BrokenReality')" class ="itemButton">buy</button> 
        </div>
    </div>

    <div class ="outputBox" id="outputBox2">
      <div id = "totalDiv">
          <h1>Shopping Cart </h1>
          <h2 id= "totalId">Total: </h2>
      </div>       
    </div>
</div>


<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <h1>Error</h1>
    <p>Too many items on the shopping cart. Please remove some items and prioritize what you want to buy.</p>
    <p> Are you really going to buy all of those games though?</p>
    <img src= "../Pages_Materials/pikachuShook.jpg">
  </div>

</div>

<script>
  var total = 0; 
  var counter = 0; 
        function addItemFunction(value, name){

          if(counter < 9){
              // creates the div where we want to put the purchase info
              let itemDiv = document.createElement("div");

              // adds the text to a variable, in his situaton we add a counter that is increasing by 1 everytime a purchase is made.
              let itemDivID = "itemDiv" + counter;
              // this auto generated text is defined as the id of the Div, so that each created line has the following IDs (itemDiv0, itemDiv1, itemDiv2, etc)
              itemDiv.setAttribute("id", itemDivID);
              // We also define a class, so that every div that has the itemDiv class can be personalized the same way through CSS
              itemDiv.setAttribute("class", "itemDiv");  
             



              // creates the <p> element
             let item = document.createElement("p"); 

             // prepares the text 
             let gameName = document.createTextNode(name + ":           " + value + " euros");

             //enters the prepared text onto the <p> element
             item.appendChild(gameName);

             itemDiv.appendChild(item);
              
             let removeButton = document.createElement("BUTTON");

              //Here we create the proper text to add as an attribute to the button. In here, the value and counter are relative, since it depends on the info we have on the game, something we send to*
              // *this function through the "onclick" button of the itemBox div. An example of this formed text would be: "removeItemFunction(50, 'itemDiv0')"
            let removeButtonFunction = "removeItemFunction(" + value + ",'itemDiv" + counter + "')";
             removeButton.setAttribute("onclick", removeButtonFunction);

              // the button will have "x" tas text
             let removeButtonText = document.createTextNode("X");

             //adding a class to the button
             removeButton.setAttribute("class","removeButton");

              //the text is added to the button
             removeButton.appendChild(removeButtonText);

              // the button is added to the itemDiv
             itemDiv.appendChild(removeButton);

              //locates the place (in this case <div>) where we want to write the element
            let outputColumn = document.getElementById("outputBox2");

            // writes the element onto the located <div>
             outputColumn.appendChild(itemDiv);

              // adds the value of the selected product to the total variable previously created
             total = total + value;

              // selects the <h2> that wants to be replaced
              let totalText = document.getElementById("totalId");

              // creates the element of the replacement
              let totalValueItem = document.createElement("h2");

              // adds an id to locate the changed element in future updates
              totalValueItem.setAttribute("id" , "totalId");

              // adds text with the newly calculated total
              let totalValue = document.createTextNode("Total: " + total + " Euros");

              //adds this prepared text onto the element
              totalValueItem.appendChild(totalValue);

              // locates the division where the element that we want to replace is
              let totalDiv = document.getElementById("totalDiv");

              // replaces the element ( replaces totalText with totlValueItem)
              totalDiv.replaceChild(totalValueItem, totalText)

                // this counter will always increase if a new purchase is made, so that every item line we have is defined diferently through their IDs (itemDiv0, itemDiv1, itemDiv2, etc)
                counter++;
          }
          else{
            var modal = document.getElementById('myModal');



            // Get the <span> element that closes the modal
            var span = document.getElementsByClassName("close")[0];

            // When the user clicks the button, open the modal 

            modal.style.display = "block";


            // When the user clicks on <span> (x), close the modal
            span.onclick = function() {
           modal.style.display = "none";
            }

            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function(event) {
            if (event.target == modal) {
            modal.style.display = "none";
            }
        }
          }
    
         }
         // we call this function when we want to remove an item that was added to the shopping cart. For this to happen, we must give this function, the item ID ( itemDiv) so that we can locate it and to remove it
         // * and its value to subtract the total by the value so that the total is always from the wanted items, not including the removed ones. 
         function removeItemFunction(subtractValue, itemDiv){

            // we locate the div we want to remove
           let removeItemDiv = document.getElementById(itemDiv);

           // we locate the Parent div that contains the div we want to remove
           let outputColumn = document.getElementById("outputBox2");

           // we remove the wanted div through its parent div
           outputColumn.removeChild(removeItemDiv);

            // we also take away the value that the item was worth from the total, since the logic is that we don't want this item anymore, so the total value of the purchase is lesser than before.
           total = total - subtractValue;

            // selects the <h2> that wants to be replaced
            let totalText = document.getElementById("totalId");

            // creates the element of the replacement
            let totalValueItem = document.createElement("h2");

            // adds an id to locate the changed element in future updates
            totalValueItem.setAttribute("id" , "totalId");

            // adds text with the newly calculated total. If the total is 0, the "euros" won't appear, for logic purposes
            let totalValue;
            
            if(total != 0){
             totalValue = document.createTextNode("Total: " + total + " Euros");
              }
            else if(total == 0){
             totalValue = document.createTextNode("Total: ");
              }

            

            //adds this prepared text onto the element
            totalValueItem.appendChild(totalValue);

            // locates the division where the element that we want to replace is
            let totalDiv = document.getElementById("totalDiv");

            // replaces the element ( replaces totalText with totlValueItem)
            totalDiv.replaceChild(totalValueItem, totalText);

            // since a div was removed, the counter gets subtracted by 1, so that if another item is entered, it can take the ID of the previously removed Item. 
           counter--;

   
         }

     </script>


 
<footer class="footer-distributed">
          
  <div class="footer-right">

    <a href="#"><i class="fa fa-facebook"></i></a>
    <a href="#"><i class="fa fa-twitter"></i></a>
    <a href="#"><i class="fa fa-linkedin"></i></a>
    <a href="#"><i class="fa fa-github"></i></a>

  </div>

  <div class="footer-left">

    <p class="footer-links">
      <a href="../Mainpage/index.html">Home</a>
      .
      <a href="../AboutPage/index.html">About/Contact</a>
      
    </p>

    <p>GameWay &copy; 2018/2019</p>
  </div>

</footer>

    </body>
    </html>